<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>{$title|default=''}</title>
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <link rel="shortcut icon" href="__CDN__/assets/img/favicon.ico" />
    <!-- Loading Bootstrap -->
    <link href="__CDN__/assets/css/chatgpt.css?v={$site.version}" rel="stylesheet">
    <script src="__CDN__/assets/libs/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="__CDN__/assets/libs/angular/angular.min.js"></script>

    <script type="text/javascript">
        var require = {
            config:  {$config|json_encode},
        };
    </script>
</head>

<body class="default-theme">

{if condition="$admin == null"}
<div class="container" style="margin-top: 20px">
    <div class="row v-align">
        <div class="col align-self-center">
            <div id="window-login" title="登录" class="panel panel-default">
                <div class="panel-body">
                    <form id="form-login" method="post" action="/index/login">

                        <div class="form-group">
                            <label for="exampleInputEmail1">登录名</label>
                            <input type="username"  name="username"   class="form-control"  placeholder="登录名" id="exampleInputEmail1">
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">登录密码</label>
                            <input type="password" class="form-control"   name="password"    placeholder="登录密码" id="exampleInputPassword1">
                        </div>
                        <button type="submit" class="btn btn-default">登录</button>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{else/}
<div class="preloader"></div>

<div class="main-wrapper"  ng-app="app" ng-controller="chat">
    <div class="chatapp">

        <!-- main content start -->
        <div class="chatapp__content">
            <div class="chatapp__messagetab">
                <!-- conversations start -->
                <div class="chatapp__conversations">
                    <!-- conversation wrapper start -->
                    <div class="conversation-wrapper">
                        <div class="conversation-panel">
                            <div class="conversation-panel__head">

                                <div class="conversation-panel__avatar info-panel-opener">
                                    <div class="user-avatar user-avatar-rounded">
                                        <img src="__CDN__/assets/img/chatgpt/chatgpt.png" alt="">
                                    </div>
                                    <div class="conversation__name">
                                        <div class="conversation__name--title">ChatGPT</div>
                                        <div class="conversation__time" ><span   ng-hide="postting">I'm a robot</span><span  ng-show="postting">Cogitating...</span></div>
                                    </div>
                                </div>
                                <div>
                                    <a href="/index/logout">退出</a>
                                </div>
                            </div>

                            <div class="conversation-panel__body" >
                                <div class="custom-scrollbar2">
                                    <div class="container">
                                        <ul class="chat-style-2">
                                            <div  ng-repeat="msg in messages">
                                                <li class="message sent"   ng-if="msg.role == 'user'">
                                                    <div class="message__text">{{ msg.content }}
                                                        <div class="metadata">
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="message received"   ng-if="msg.role == 'assistant'">
                                                    <div class="message__text">{{ msg.content }}
                                                        <div class="metadata">
                                                        </div>
                                                    </div>
                                                </li>
                                            </div>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="conversation-panel__footer">
                                <div class="composer">
                                    <div class="composer__middle">
                                        <textarea class="form-control" rows="1" placeholder="Type a message..."  ng-model="content"></textarea>
                                    </div>
                                    <div class="composer__right">
                                        <div class="composer__right--send"  ng-click="sendMessage();">
                                            <i class="mdi mdi-send"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- conversation panel end -->
                </div>
                <!-- conversations end -->
            </div>
        </div>
        <!-- main content end -->
    </div>
</div>

{/if}

</body>

<script src="__CDN__/assets/libs/jquery/dist/jquery.min.js"></script>
<script src="__CDN__/assets/libs/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="__CDN__/assets/libs/perfect-scrollbar/perfect-scrollbar.min.js"></script>
{if condition="$admin != null"}
<script src="__CDN__/assets/js/chatgpt.js"></script>
{/if}
